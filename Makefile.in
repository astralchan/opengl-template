# vim: ts=4 sw=4 noet cc=80

.POSIX:

include config.mk

# build rules
all: prog
prog: main.c util.o renderer.o
	$(CC) $(CFLAGS) $(LDFLAGS) -o $@ main.c util.o renderer.o
util.o: util.c util.h
renderer.o: renderer.c renderer.h util.h
clean:
	@rm -f prog util.o renderer.o

# install rules
install:
	mkdir -p $(DESTDIR)$(PREFIX)/bin
	cp prog $(DESTDIR)$(PREFIX)/bin
	chmod 755 $(DESTDIR)$(PREFIX)/bin/prog
uninstall:
	rm -f $(DESTDIR)$(PREFIX)/bin/prog

# suffix rules
.SUFFIXES: .c .o
.c.o:
	$(CC) $(CFLAGS) -c $<
